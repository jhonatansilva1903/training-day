<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Training Day — Treinos</title>
    <meta name="theme-color" content="#0b0f1a" />
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- PDF deps -->
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <!-- Styles -->
    <link rel="stylesheet" href="style.css" />
  </head>
  <body class="min-h-screen">
    <header class="max-w-5xl mx-auto p-4 md:p-6">
      <div class="flex flex-wrap items-center justify-between gap-3">
        <div>
          <h1 class="text-3xl md:text-4xl font-black title-gradient">
            Training Day
          </h1>
          <p class="text-sm text-gray-400">
            Treino para iniciantes com progressão de xp
          </p>
        </div>
        <div class="flex flex-wrap items-center gap-2">
          <button
            id="manageTrainingsBtn"
            class="px-3 py-2 rounded-xl btn-primary font-semibold"
          >
            Gerenciar treinos
          </button>
          <button
            id="exportPdfBtn"
            class="px-3 py-2 rounded-xl btn-primary font-semibold"
          >
            Exportar
          </button>
          <button
            id="resetWeek"
            class="px-3 py-2 rounded-xl btn-danger font-semibold"
          >
            Resetar
          </button>
        </div>
      </div>
    </header>

    <main class="max-w-5xl mx-auto px-4 md:px-6 pb-16">
      <!-- Tabs (treinos/dias) -->
      <nav id="daysTabs" class="flex flex-wrap gap-2 mb-6"></nav>

      <!-- Resumo do treino -->
      <section class="card p-4 md:p-6 mb-6">
        <div class="flex items-start justify-between gap-4">
          <div>
            <h2 id="dayTitle" class="text-xl md:text-2xl font-bold">Treino 1</h2>
            <p class="text-sm text-gray-400">
              Progresso = volume (carga × reps) vs PR salvo. PR sobe
              automaticamente quando você supera o volume anterior.
            </p>
          </div>
          <span
            id="exerciseCount"
            class="badge px-3 py-1 rounded-lg text-xs uppercase tracking-wide"
            >0 exercícios</span
          >
        </div>
        <div class="mt-4">
          <div
            class="flex items-center justify-between text-xs mb-1 text-gray-400"
          >
            <span>XP total do treino</span>
            <span id="dayXPLabel">0%</span>
          </div>
          <div class="xpbar"><div id="dayXP" class="xpfill w-0"></div></div>
        </div>
      </section>

      <div class="mb-4 flex justify-between items-center">
        <button
          id="addExerciseBtn"
          class="px-3 py-2 rounded-xl glass border border-gray-700 hover:bg-gray-800"
        >
          + Adicionar exercício
        </button>
      </div>

      <!-- Cards (exercícios) -->
      <section
        id="cards"
        class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6"
      ></section>

      <div class="mt-8 flex justify-end">
        <button
          id="saveDay"
          class="px-4 py-3 rounded-2xl btn-primary font-bold"
        >
          Salvar treino
        </button>
      </div>
    </main>

    <!-- Modal Timer -->
    <div
      id="timerModal"
      class="fixed inset-0 hidden items-center justify-center modal-backdrop z-50"
    >
      <div class="card p-6 rounded-2xl w-[92%] max-w-md">
        <div class="flex items-start justify-between">
          <h3 class="text-lg font-semibold">Timer de descanso</h3>
          <button id="timerClose" class="text-gray-400 hover:text-gray-200">
            ✕
          </button>
        </div>
        <p id="timerExercise" class="text-sm text-gray-400 mt-1"></p>

        <div class="grid grid-cols-3 gap-3 mt-4">
          <label class="flex flex-col text-sm">
            <span class="text-gray-400">Min</span>
            <input
              id="timerMin"
              type="number"
              min="0"
              value="1"
              class="mt-1 rounded-lg bg-[#0b1220] border border-gray-700 px-3 py-2"
            />
          </label>
          <label class="flex flex-col text-sm">
            <span class="text-gray-400">Seg</span>
            <input
              id="timerSec"
              type="number"
              min="0"
              max="59"
              value="0"
              class="mt-1 rounded-lg bg-[#0b1220] border border-gray-700 px-3 py-2"
            />
          </label>
          <label class="flex flex-col text-sm">
            <span class="text-gray-400">Auto loop</span>
            <select
              id="timerLoop"
              class="mt-1 rounded-lg bg-[#0b1220] border border-gray-700 px-3 py-2"
            >
              <option value="0" selected>Não</option>
              <option value="1">Sim</option>
            </select>
          </label>
        </div>

        <div class="mt-4 p-3 rounded-xl glass text-center">
          <div class="text-3xl font-bold" id="timerDisplay">00:00</div>
          <div class="text-xs text-gray-400" id="timerStatus">Pronto</div>
        </div>

        <div class="mt-4 flex gap-2 justify-end">
          <button
            id="timerStop"
            class="px-3 py-2 rounded-xl glass border border-gray-700 hover:bg-gray-800"
          >
            Parar
          </button>
          <button
            id="timerStart"
            class="px-3 py-2 rounded-xl btn-primary font-semibold"
          >
            Iniciar
          </button>
        </div>
      </div>
    </div>

    <!-- Modal Gerenciar Treinos -->
    <div
      id="daysModal"
      class="fixed inset-0 hidden items-center justify-center modal-backdrop z-50"
    >
      <div class="card p-6 rounded-2xl w-[92%] max-w-lg">
        <div class="flex items-start justify-between">
          <h3 class="text-lg font-semibold">Gerenciar treinos</h3>
          <button id="daysClose" class="text-gray-400 hover:text-gray-200">
            ✕
          </button>
        </div>

        <div class="mt-4">
          <label class="text-sm text-gray-400">Adicionar treino</label>
          <div class="mt-1 flex gap-2">
            <input
              id="newDayInput"
              placeholder="Ex.: Treino 2, Treino B, Quarta..."
              class="flex-1 rounded-lg bg-[#0b1220] border border-gray-700 px-3 py-2"
            />
            <button
              id="addDayBtn"
              class="px-3 py-2 rounded-xl btn-primary font-semibold"
            >
              Adicionar
            </button>
          </div>
        </div>

        <div class="mt-6">
          <p class="text-sm text-gray-400 mb-2">Treinos atuais</p>
          <ul id="daysList" class="space-y-2"></ul>
          <small class="text-gray-500 block mt-2"
            >Dica: renomeie para “Treino 1/2/3” ou “Treino A/B/C”.</small
          >
        </div>
      </div>
    </div>

    <!-- Modal Selecionar Treino para Exportar -->
    <div
      id="exportModal"
      class="fixed inset-0 hidden items-center justify-center modal-backdrop z-50"
    >
      <div class="card p-6 rounded-2xl w-[92%] max-w-md">
        <div class="flex items-start justify-between">
          <h3 class="text-lg font-semibold">Exportar treino</h3>
          <button id="exportClose" class="text-gray-400 hover:text-gray-200">
            ✕
          </button>
        </div>
        <p class="text-sm text-gray-400 mt-1">
          Escolha qual treino você quer exportar em PDF.
        </p>

        <div class="mt-4 flex gap-2">
          <select
            id="exportSelect"
            class="flex-1 rounded-lg bg-[#0b1220] border border-gray-700 px-3 py-2"
          ></select>
          <button
            id="exportConfirm"
            class="px-3 py-2 rounded-xl btn-primary font-semibold"
          >
            Gerar PDF
          </button>
        </div>
      </div>
    </div>

    <!-- Sugestões globais para combobox -->
    <datalist id="exerciseOptions"></datalist>

    <!-- Plano padrão -->
    <script>
      window.__SEED__ = {
        "Treino 1": ["Novo exercício"]
      };
    </script>
    <script src="script.js"></script>
  </body>
</html>
